<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=600,initial-scale=1">
    <script src="https://g200kg.github.io/webaudio-controls/webaudio-controls.js" ></script>
  </head>

  <body>
    <h1>Ruffbox - Play a Beat !11</h1>

    A text-based beat sequencer. <br/><br/>

    Needs <b>Chromium/Chrome 74+</b> and <b>chrome://flags/#enable-experimental-web-platform-features</b> enabled!
    
    <h2> Scriptable Sequencer </h2>    
    <div>
      <textarea id="code_input" style="float: left; width:400px; height:300px; vertical-align:top; margin-right: 20px; padding-right: 0px;">
bd ~ ~ ~ bd ~ ~ ~ bd ~ ~ ~ bd ~ ~ ~
~ ~ hh ~ ~ ~ hh ~ ~ ~ hh ~ ~ ~ hh ~
~ ~ ~ ~ sn ~ ~ ~ ~ ~ ~ ~ sn ~ ~ ~ 
~ ~ casio ~ ~ ~ casio ~ ~ casio ~ ~ ~
      </textarea>
      
      <div>
	<webaudio-switch id="evaluate-loop" defval="0" value="0" type="kick">Evaluate</webaudio-switch> (Ctrl + Return)<br/> 
	<webaudio-switch id="start-scheduler" defval="0" value="0" type="toggle">Start/Stop</webaudio-switch> (Ctrl + .) <br/><br/>
	<b>Tempo:</b>  <input type="number" id="tempo" value="128" style="width:50px"> (milliseconds per 16th, on next eval)<br/>
      </div>
      
      <br/>
      <b>Syntax:</b> Each symbol is a 16th note, each line is a loop! <br/><br/>      
      bd = bassdrum<br/>
      sn = snare <br/>
      casio = beep <br/>
      hh = hi-hat <br/>
      ~ = silence <br/>     
    </div>
    
    <div style="clear:left; padding-top: 10px;">      
      <h2> Manual Triggers (for testing) </h2>      
      <div>      
	<webaudio-switch id="bassdrum-trigger" defval="0" value="0" type="kick">Bassdrum</webaudio-switch>
	<webaudio-switch id="snare-trigger" defval="0" value="0" type="kick">Snare</webaudio-switch>
      </div>
    </div>      
    <br/>
    <br/>
    <div>
      Made with <b>Rust</b>, <b>Web Workers</b>, <b>AudioWorklet</b> and <b>WebAssembly</b>!
    </div>
    <br/>
    <div>
      Code: <a href ="https://github.com/the-drunk-coder/ruffbox">https://github.com/the-drunk-coder/ruffbox</a>
    </div>
    <br/>    
    <br/>
    <script src="js/setup.js?t=10"></script>        
  </body>
</html>
